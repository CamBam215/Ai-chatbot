<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>AI Chatbot</title>
<style>
body {
  background:#0f172a;
  font-family:Arial;
  display:flex;
  justify-content:center;
  align-items:center;
  height:100vh;
  color:white;
}
#bot {
  width:420px;
  background:#020617;
  border-radius:12px;
  display:flex;
  flex-direction:column;
}
header {
  padding:15px;
  text-align:center;
  border-bottom:1px solid #1e293b;
}
#chat {
  flex:1;
  padding:10px;
  overflow-y:auto;
}
.msg { margin-bottom:10px; }
.user { color:#38bdf8; }
.ai { color:#a5b4fc; }
footer { display:flex; }
input {
  flex:1;
  padding:12px;
  border:none;
  background:#020617;
  color:white;
}
button {
  padding:12px;
  border:none;
  background:#2563eb;
  color:white;
  cursor:pointer;
}
</style>
</head>

<body>
<div id="bot">
  <header>AI Chatbot</header>
  <div id="chat"></div>
  <footer>
    <input id="input" placeholder="Type a message..." />
    <button onclick="send()">Send</button>
  </footer>
</div>

<script>
const chat = document.getElementById("chat");
const input = document.getElementById("input");

let history = [];

function add(text, cls) {
  const d = document.createElement("div");
  d.className = "msg " + cls;
  d.innerHTML = text;
  chat.appendChild(d);
  chat.scrollTop = chat.scrollHeight;
}

async function send() {
  const msg = input.value.trim();
  if (!msg) return;
  input.value = "";

  add("<b>You:</b> " + msg, "user");
  history.push({ role:"user", content:msg });

  const res = await fetch("https://*-broken-grass-7903.binghamcamden.workers.dev", {
    method:"POST",
    headers:{ "Content-Type":"application/json" },
    body: JSON.stringify({ messages: history })
  });

  const data = await res.json();
  const reply = data.reply;

  history.push({ role:"assistant", content:reply });
  add("<b>AI:</b> " + reply, "ai");
}

add("<b>AI:</b> Hello! I'm powered by real AI.", "ai");
</script>
</body>
</html>
